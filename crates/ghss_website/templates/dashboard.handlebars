{{#> layout title=repository_name user=user}}

{{#*inline "add-head"}}
{{#if data.Data}}
<link rel="stylesheet" href="/static/dashboard.css">
<link rel="stylesheet" href="/static/uPlot.min.css">
<script src="/static/uPlot.iife.min.js" defer></script>
<script src="/static/dashboard.js" type="module" data-repository="{{data.Data.repository_id}}"></script>
{{/if}}
{{/inline}}

{{#*inline "add-title"}}
<a href="https://github.com/{{repository_name}}" class="repo-link"><img src="/static/github-mark-light-32.png"
    alt="Repository on GitHub" title="Repository on GitHub"></a>
{{/inline}}

{{#*inline "add-header"}}
<fieldset class="timerange">
  <legend>Time range</legend>
  <input id="startdate" type="date" aria-label="Start date"> to
  <input id="enddate" type="date" aria-label="End date">
</fieldset>
{{/inline}}

{{#*inline "main"}}
{{#if data.Data}}
<div id="dashboard">
  <div class="panel" id="overall-success"></div>
  <div class="panel" id="overall-duration"></div>
  <div class="panel" id="stats-by-pipeline"></div>
  <div class="panel" id="duration"></div>
  <div class="panel" id="attempts"></div>
</div>
{{/if}}{{#if data.Error}}
<div class="error">
  <h2>Something went wrong</h2>
  <p>{{data.Error.message}}</p>
</div>
{{/if}}
{{/inline}}

{{/layout}}