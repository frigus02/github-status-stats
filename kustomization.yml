apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - grafana/deployment.yml
  - grafana/secret.yml
  - importer/cronjob.yml
  - influxdb/deployment.yml
  - influxdb/secret.yml
  - website/deployment.yml
  # - k8s/ingress.yml
commonLabels:
  group: github-status-stats
configMapGenerator:
  - name: ghss-grafana
    files:
      - grafana/config/grafana.ini
  - name: ghss-grafana-dashboards
    files:
      - grafana/dashboards/builds.json
secretGenerator:
  - name: ghss-github
    type: Opaque
    envs:
      - k8s/.env.github
    files:
      - PRIVATE_KEY=k8s/.env.github-private-key
generatorOptions:
  disableNameSuffixHash: true
